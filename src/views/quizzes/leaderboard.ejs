<% layout('layout') -%>
<h1 class="mb-3"><%= quiz.title %> - Leaderboard</h1>
<p class="text-muted mb-4"><%= quiz.description %></p>

<% if (leaderboard.length === 0) { %>
  <div class="alert alert-info">No attempts yet. Be the first to take this quiz!</div>
<% } else { %>
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead class="table-dark">
        <tr>
          <th>Rank</th>
          <th>User</th>
          <th>Score</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        <% leaderboard.forEach((entry, idx) => { %>
          <tr>
            <td>
              <% if (idx === 0) { %>
                <span class="badge bg-warning text-dark">ðŸ¥‡ 1st</span>
              <% } else if (idx === 1) { %>
                <span class="badge bg-secondary">ðŸ¥ˆ 2nd</span>
              <% } else if (idx === 2) { %>
                <span class="badge bg-info text-dark">ðŸ¥‰ 3rd</span>
              <% } else { %>
                #<%= entry.rank %>
              <% } %>
            </td>
            <td><%= entry.userName %></td>
            <td><strong><%= entry.score %> / <%= entry.total %></strong> (<%= ((entry.score / entry.total) * 100).toFixed(1) %>%)</td>
            <td><%= new Date(entry.created_at).toLocaleString() %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
<% } %>

<div class="mt-4">
  <a href="/quizzes/<%= quiz.id %>" class="btn btn-outline-secondary">Back to Quiz</a>
  <a href="/quizzes/<%= quiz.id %>/play" class="btn btn-primary">Take Quiz</a>
</div>

